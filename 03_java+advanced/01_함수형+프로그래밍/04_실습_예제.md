# 04. 실습 예제

#스트림 #stream #람다 #lambda #메서드참조

---

https://github.com/notlikelion/250805_fp/tree/main/src/step1

---

## Solution01: 입력을 숫자/문자 분류하기

#Scanner #parseInt #NumberFormatException

```java
package step1;

import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

public class Solution01 {
    public static void main(String[] args) {
        // 문자열과 숫자를 각각 별도의 리스트로 수집
        List<String> stringList = new ArrayList<>();
        List<Integer> intList = new ArrayList<>();

        Scanner scanner = new Scanner(System.in);
        while (true) {
            System.out.print("입력해주세요 : ");
            String input = scanner.nextLine();
            if (input.equals("종료")) {
                break; // "종료" 입력 시 반복 종료
            }
            try {
                // 숫자로 변환 가능한 경우 숫자 리스트에 저장
                intList.add(Integer.parseInt(input));
            } catch (NumberFormatException e) {
                // 숫자 변환 실패 시 문자열 리스트에 저장
                System.err.println("숫자 포맷을 입력해주세요!");
                stringList.add(input);
            }

            System.out.println(stringList);
            System.out.println(intList);
        }
    }
}
```

---

## Solution02: 리스트 요소 일괄 변환(×10)

#map #변환 #사이드이펙트

```java
package step1;

import java.util.ArrayList;
import java.util.List;
import java.util.Random;

public class Solution02 {
    public static void main(String[] args) {
        List<Integer> numberList = new ArrayList<>();
        Random rd = new Random();

        // 10~20개 사이의, 0~100 사이의 난수 생성 후 리스트 채우기
        for (int i = 0; i < rd.nextInt(11) + 10; i++) {
            numberList.add(rd.nextInt(101));
        }
        System.out.println(numberList);

        // 1) 전통 for 루프: 원본을 직접 수정(사이드 이펙트 발생 가능)
        for (int i = 0; i < numberList.size(); i++) {
            numberList.set(i, numberList.get(i) * 10);
        }
        System.out.println(numberList);

        // 2) 향상된 for: 사본 리스트 생성
        List<Integer> numberList2 = new ArrayList<>();
        for (int v : numberList) {
            numberList2.add(v * 10);
        }
        System.out.println(numberList2);
        System.out.println(numberList); // 원본은 그대로 유지

        // 3) 스트림 map: 선언형 파이프라인으로 변환
        List<Integer> numberList3 = numberList.stream()
                .map(Solution02::multiplyTen)
                .toList();
        System.out.println(numberList3);
    }

    static int multiplyTen(int x) {
        return x * 10;
    }
}
```

---

## Solution03: 메서드 참조 체이닝과 비교

#method-reference #absolute #abs #random

```java
package step1;

import java.util.ArrayList;
import java.util.List;
import java.util.Random;

public class Solution03 {
    public static void main(String[] args) {
        List<Integer> list = new ArrayList<>();
        Random rd = new Random();

        // 정규 분포 난수를 정수 범위로 변환하여 100개 생성
        for (int i = 0; i < 100; i++) {
            list.add((int) (rd.nextGaussian() * 100));
        }
        System.out.println(list);

        // 스트림 + 메서드 참조 체이닝
        List<Integer> list2 = list.stream()
                .map(Math::abs)            // 절대값
                .map(Solution03::addOne)   // +1
                .map(rd::nextInt)          // 0 이상 해당 값 미만의 난수로 매핑
                .toList();

        // 전통 방식 비교
        List<Integer> list3 = new ArrayList<>();
        for (int i : list) {
            int v = rd.nextInt(addOne(Math.abs(i)));
            list3.add(v);
        }

        System.out.println(list2);
        System.out.println(System.identityHashCode(list2));
        System.out.println(list);
        System.out.println(System.identityHashCode(list));
    }

    static int addOne(int x) { return x + 1; }
}
```

---

## Solution04: 문자열 변환(map) 실습

#map #formatted #포매팅

```java
package step1;

import java.util.List;

public class Solution04 {
    public static void main(String[] args) {
        List<String> list = List.of("바나나", "사과", "배", "귤", "포도");
        System.out.println(list);

        System.out.println(
                list.stream()
                    .map(x -> "🐒 %s 🐒".formatted(x)) // 메서드 참조로도 가능: "🐒 %s 🐒"::formatted
                    .toList()
        );
    }

    static String change(String x) { return x + "입니다"; }
}
```

---

## Solution05: map/filter/sorted 다양한 예시

#sorted #descending #compareTo #boxed

```java
package step1;

import java.util.Arrays;
import java.util.List;

public class Solution05 {
    public static void main(String[] args) {
        // map 예시
        List<String> lst1 = List.of("Hello", "Bye", "Go Go");
        System.out.println(lst1);
        System.out.println(
            lst1.stream().map(x -> {
                if (x.length() <= 3) return "😂";
                return "😍";
            }).toList()
        );

        // filter 예시(절대값이 10 이상)
        List<Double> lst2 = List.of(1.314, -3.7, -23.5555, 12.485);
        System.out.println(
            lst2.stream().map(Math::abs).filter(x -> x >= 10).toList()
        );

        // 배열 정렬
        int[] arr = {1, 5, 7, 9, 2, 4};
        int[] sortedArr = Arrays.stream(arr).sorted().toArray();
        System.out.println(Arrays.toString(sortedArr));

        // 원본 정렬(사이드 이펙트)
        Arrays.sort(arr);
        System.out.println(Arrays.toString(arr));

        // 내림차순 정렬(박싱 후 Comparator 사용)
        List<Integer> sortedDesc = Arrays.stream(arr)
                .boxed()
                .sorted((a, b) -> b - a)
                .toList();
        System.out.println(sortedDesc);

        // 문자열 정렬(기본/역순/길이)
        List<String> stringList = List.of("사과", "귤", "바나나");
        System.out.println(stringList.stream().sorted().toList());
        System.out.println(stringList.stream().sorted((a, b) -> b.compareTo(a)).toList());
        System.out.println(stringList.stream().sorted((a, b) -> a.length() - b.length()).toList());
        System.out.println(stringList.stream().sorted((a, b) -> b.length() - a.length()).toList());
    }
}
```

---

## Solution06: reduce와 forEach

#reduce #forEach #accumulator #초기값

```java
package step1;

import java.util.List;

public class Solution06 {
    public static void main(String[] args) {
        // 합계(전통 방식)
        List<Integer> l1 = List.of(1, 5, 4, 3, 7);
        int sum = 0;
        for (Integer i : l1) sum += i;
        System.out.println(sum);

        // reduce로 합계/곱 계산
        System.out.println("REDUCE");
        System.out.println(l1.stream().reduce(0, (cur, acc) -> cur + acc));
        System.out.println(l1.stream().reduce(1, (cur, acc) -> cur * acc));

        // 문자열 연결(reduce)
        List<String> list = List.of("apple", "asia", "anaconda", "bear", "pear");
        System.out.println(list.stream().reduce("%s,%s"::formatted).orElse(""));

        // forEach — 종결 연산(소비)
        list.stream().forEach(System.out::println);
    }
}
```
